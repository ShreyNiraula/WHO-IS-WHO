<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ministery Information</title>
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
  </head>
  <body>
    <div class="container-fluid">

      
      <div class="jumbotron text-center pb-2 pt-0 pl-0 pr-0">

        <div class="topOptions">
          <div class = "home-button">
            <a href="/" class= "btn btn-outline-primary" type="button"><i class="fas fa-home"></i></a>
          </div>
          <div class = "logout-button">
            <% if (isLogged[0].isLogged) { %>
              <form action="/admin/logout" method="POST">
                <button
                  type="submit"
                  class="btn btn-outline-primary"
                >
                <i class="fa fa-sign-out"></i>
                </button>
              </form>
                <%} else { %>
                  <div></div>
                <% }
            %>
          </div>
        </div>
      
        <div class = "jumboContent">
          
          <h1><%= ministryInfo[0].Ministry%></h1>
          <img src= "/img/NepalEmblem.png" height="50px"/>
          <p class="lead">also known as <%= result[0].Ministry_id%> <% if (ministryInfo[0].Established_Date) { %> , was established in <%= ministryInfo[0].Established_Date%> <%} %></p> 

          <hr class="my-4">
          <p>
            <strong>Official Website:  <a href="<%= result[0].URL%>"><%= ministryInfo[0].URL%></a></strong>
          </p>
        </div>
      </div>
      <div class="container mb-5">
        
        <h2 class = "text-center mt-3 mb-5">Positions
            <% if (isLogged[0].isLogged) { %>
             <a href="/add/<%= result[0].Ministry_id%>" type="button"><i class="fa fa-plus-circle"></i></a>
            <%} else { %>
              <div></div>
            <% } %>
        </h2>
          <div class = "position-list">
            
            <% result.forEach((pos)=>{      
            let params = {
                Candidate_id: pos.Candidate_id,
                Initials:pos.Initials,
                First_Name: pos.First_Name,
                Middle_Name: pos.Middle_Name,
                Last_Name: pos.Last_Name,
                Position: pos.Position,
                Photo_URL: pos.Photo_URL,
                Department: pos.Department,
                Salary: pos.Salary
              }
              // use js method to pass the query string
              const qs = Object.keys(params).map((key)=>`${key}=${params[key]}`).join('&');
              %>
            <div class="card" style="width: 16rem;">
              <a href="/candidate/<%= pos.Candidate_id%>">
                <img class="card-img-top rounded-circle z-depth-2 the-image" src="<%= pos.Photo_URL%>" alt="Card image cap" data-holder-rendered="true">
                </a>
              <div class="card-body text-center">
                <h5 class="card-title"><%= pos.First_Name%> <%= pos.Middle_Name%> <%= pos.Last_Name%></h5>
                <h6 class="card-subtitle">Position: <%= pos.Position%></h6>
                

                <% if (pos.Department == "General") { %>
                    <div></div>
                  <%} else 
                { %>
                  <h6 class = "lead small">Department: <%=pos.Department%></h6>
                <% } %>

                <% if (pos.Position === "Minister" || pos.Position === "Prime Minister" || pos.Position === "Deputy Prime Minister") { %>
                  <div class = "text-center my-3"><a style="text-decoration: none; color:rgb(83, 83, 83)" href='/history/<%= result[0].Ministry_id%>'>Click to see past ministers</a></div>
                  <%} else 
                { %>
                  <div></div>
              <% } %>

              
                <% if (isLogged[0].isLogged) { %>
                  <small class='text-center'>Salary: Rs <%= pos.Salary.toLocaleString()%></small>
              <%} else { %>
                <div></div>
              <% } %>



              </div>
              <div class = "updateDeleteCandidate">
                <div class="editCandidate">
                  <% if (isLogged[0].isLogged) { %>
                    <a href="/update/<%= result[0].Ministry_id%>/<%= pos.Position %>?<%=qs%>" type="button">
                      <i class="fa fa-pencil"></i>
                    </a>
                  <%} else { %>
                      <div></div>
                  <% } %>
                </div>
                <div class="deleteCandidate">
                  <% if (isLogged[0].isLogged) { %>
                    <a href="/delete/<%= result[0].Ministry_id%>/<%= pos.Position %>?<%=pos.Candidate_id%>" type="button">
                      <i class="fa fa-trash"></i>
                    </a>
                  <%} else { %>
                      <div></div>
                  <% } %>
              </div>
            </div>
            </div>

            <% }) %>

          </div>
    </div>

    <footer class="footer">

      <div class="footer-copyright text-center">Â© 2020 Copyright</div>

    </footer>
        

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/0ff4f7eb6b.js" crossorigin="anonymous"></script>
    
  </body>
</html>
